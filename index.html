<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Typing Association Game</title>
<style>
    :root {
        --bg: #ffffff;
        --text: #111111;
        --accent: #0071e3;
        --grey: #f5f5f7;
        --radius: 14px;
        --font-main: -apple-system, BlinkMacSystemFont, "San Francisco", 
                     "Helvetica Neue", Helvetica, Arial, sans-serif;
    }
    body {
        margin: 0;
        background: var(--bg);
        font-family: var(--font-main);
        display: flex;
        height: 100vh;
        justify-content: center;
        align-items: center;
    }
    .container {
        text-align: center;
        width: 420px;
        padding: 40px;
        border-radius: var(--radius);
        background: var(--grey);
        box-shadow: 0 8px 30px rgba(0,0,0,0.08);
        animation: fadeIn .4s ease;
    }
    h1 {
        margin: 0 0 20px;
        font-size: 28px;
        font-weight: 600;
    }
    .word-box {
        font-size: 40px;
        font-weight: 700;
        color: var(--accent);
        margin-bottom: 20px;
    }
    input {
        width: 90%;
        padding: 14px;
        border: 2px solid transparent;
        border-radius: var(--radius);
        font-size: 18px;
        background: #fff;
        transition: .25s;
    }
    input:focus { border: 2px solid var(--accent); }
    .score { margin-top: 20px; font-size: 18px; }
    .good { color: #24a148 !important; }
    .bad { color: #c41c1c !important; }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>
</head>
<body>

<div class="container">
    <h1>Word Association</h1>
    <div class="word-box" id="wordBox">School</div>
    <input type="text" id="inputBox" placeholder="Type related word..." autofocus />
    <div class="score">Score: <span id="score">0</span></div>
</div>

<script>
    const words = [
        "School","Boat","Dog","Food","Sun","Car","Rain",
        "Music","Tree","Phone","Beach","Moon","Book","Fire"
    ];

    let score = 0;
    let index = 0;
    
    const wordBox = document.getElementById("wordBox");
    const inputBox = document.getElementById("inputBox");
    const scoreDisplay = document.getElementById("score");

    function nextWord() {
        index = (index + 1) % words.length;
        wordBox.textContent = words[index];
        inputBox.value = "";
    }

    async function checkWord(user, main) {
        const url = `https://api.datamuse.com/words?ml=${main}&max=30`;
        const url2 = `https://api.datamuse.com/words?rel_trg=${main}&max=30`;

        const fetch1 = await fetch(url).then(r => r.json());
        const fetch2 = await fetch(url2).then(r => r.json());

        const related = [...fetch1, ...fetch2].map(i => i.word.toLowerCase());

        return related.includes(user);
    }

    inputBox.addEventListener("keydown", async (e) => {
        if (e.key === "Enter") {
            const main = wordBox.textContent.toLowerCase();
            const user = inputBox.value.toLowerCase().trim();
            if (user === "") return;

            const valid = await checkWord(user, main);
            
            if (valid) {
                score++;
                wordBox.classList.add("good");
                setTimeout(()=> wordBox.classList.remove("good"), 250);
            } else {
                score--;
                wordBox.classList.add("bad");
                setTimeout(()=> wordBox.classList.remove("bad"), 250);
            }

            scoreDisplay.textContent = score;
            nextWord();
        }
    });
</script>

</body>
</html>
